# http学习

要展现一个网页，浏览器首先发送一个请求来获取页面的HTML文档，再解析文档中的资源信息发送其他请求，获取可执行脚本或CSS样式来进行页面布局渲染，以及一些其它页面资源（如图片和视频等）。然后，浏览器将这些资源整合到一起，展现出一个完整的文档，也就是网页。浏览器执行的脚本可以在之后的阶段获取更多资源，并相应地更新网页。

HTTP是无状态的：在同一个连接中，两个执行成功的请求之间是没有关系的。这就带来了一个问题，用户没有办法在同一个网站中进行连续的交互，比如在一个电商网站里，用户把某个商品加入到购物车，切换一个页面后再次添加了商品，这两次添加商品的请求之间没有关联，浏览器无法知道用户最终选择了哪些商品。而使用HTTP的头部扩展，HTTP Cookies就可以解决这个问题。把Cookies添加到头部中，创建一个会话让每次请求都能共享相同的上下文信息，达成相同的状态。
注意，HTTP本质是无状态的，使用Cookies可以创建有状态的会话。  

## 缓存

缓存是一种保存资源副本并在下次请求时直接使用该副本的技术。当 web 缓存发现请求的资源已经被存储，它会拦截请求，返回该资源的拷贝，而不会去源服务器重新下载。这样带来的好处有：缓解服务器端压力，提升性能(获取资源的耗时更短了)。缓存需要合理配置，因为并不是所有资源都是永久不变的：重要的是对一个资源的缓存应截止到其下一次发生改变（即不能缓存过期的资源）。  
缓存的种类有很多,其大致可归为两类：私有与共享缓存。共享缓存存储的响应能够被多个用户使用。私有缓存只能用于单独用户。  

## 访问机制

### 跨域资源共享（CORS）

跨域资源共享(CORS) 是一种机制，它使用额外的 HTTP 头来告诉浏览器，让运行在一个 origin (domain) 上的Web应用被准许访问来自不同源服务器上的指定的资源。当一个资源从与该资源本身所在的服务器不同的域、协议或端口请求一个资源时，资源会发起一个跨域 HTTP 请求。  
现代浏览器支持在 API 容器中（例如 XMLHttpRequest 或 Fetch ）使用 CORS，以降低跨域 HTTP 请求所带来的风险。现代浏览器处理跨域资源共享的客户端部分，包括HTTP头和相关策略的执行。但是这一新标准意味着服务器需要处理新的请求头和响应头。  

跨域资源共享标准新增了一组 HTTP 首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源。另外，规范要求，对那些可能对服务器数据产生副作用的 HTTP 请求方法（特别是 GET 以外的 HTTP 请求，或者搭配某些 MIME 类型的 POST 请求），浏览器必须首先使用 OPTIONS 方法发起一个预检请求（preflight request），从而获知服务端是否允许该跨域请求。服务器确认允许之后，才发起实际的 HTTP 请求。在预检请求的返回中，服务器端也可以通知客户端，是否需要携带身份凭证（包括 Cookies 和 HTTP 认证相关数据）。  

#### 工作原理

简单请求  
预检请求  

## 响应代码（五类）

### 信息响应（100-199）

1.100 Continue  
这个临时响应表明，迄今为止的所有内容都是可行的，客户端应该继续请求，如果已经完成，则忽略它。

2.101 Switching Protocol  
该代码是响应客户端的 Upgrade 标头发送的，并且指示服务器也正在切换的协议。

3.102 Processing
表示服务器已收到并正在处理该请求，但没有响应可用。

4.103 Early Hints
主要用于与Link 链接头一起使用，以允许用户代理在服务器仍在准备响应时开始预加载资源。

### 成功响应（200-299）

1.200 OK
请求成功。成功的含义取决于HTTP方法：  
(1)GET：资源已被提取并在消息正文中传输  
(2)HEAD：实体标头位于消息正文中  
(3)POST：描述动作结果的资源在消息体中传输  
(4)TRACE：消息正文包含服务器收到的请求消息  

2.201 Created  
该请求已成功，并因此创建了一个新的资源。这通常是在POST请求，或是某些PUT请求之后返回的响应。

3.202 Accepted  
请求已经接收到，但还未响应，没有结果。意味着不会有一个异步的响应去表明当前请求的结果，预期另外的进程和服务去处理请求，或者批处理

### 重定向（300-399）

1.300 Multiple Choice  
被请求的资源有一系列可供选择的回馈信息，每个都有自己特定的地址和浏览器驱动的商议信息。用户或浏览器能够自行选择一个首选的地址进行重定向。  

2.301 oved Permanently  
被请求的资源已永久移动到新位置∂

3.302 Found  
请求的资源现在临时从不同的 URI 响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求。

4.303 See Other  
对应当前请求的响应可以在另一个 URI 上被找到，而且客户端应当采用 GET 的方式访问那个资源。

5.304 Not Modified  
如果客户端发送了一个带条件的 GET 请求且该请求已被允许，而文档的内容（自上次访问以来或者根据请求的条件）并没有改变，则服务器应当返回这个状态码。

### 客户端响应（400-499）

1.400 Bad Request  
语义有误，当前请求无法被服务器理解。除非进行修改，否则客户端不应该重复提交这个请求；  
请求参数有误。

2.401 Unauthorized  
当前请求需要用户验证。该响应必须包含一个适用于被请求资源的 WWW-Authenticate 信息头用以询问用户信息。

3.403 Forbidden  
服务器已经理解请求，但是拒绝执行它。  

4.404 Not Found  
请求失败，请求所希望得到的资源未被在服务器上发现。

5.405 Method Not Allowed
请求行中指定的请求方法不能被用于请求相应的资源。

6.406 Not Acceptable  
请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体。

### 服务端响应（500-599）

1.500 Internal Server Error  
服务器遇到了不知道如何处理的情况。

2.501 Not Implemented  
此请求方法不被服务器支持且无法被处理。只有GET和HEAD是要求服务器支持的，它们必定不会返回此错误代码。

3.502 Bad Gateway  
此错误响应表明服务器作为网关需要得到一个处理这个请求的响应，但是得到一个错误的响应。

4.503 Service Unavailable  
服务器没有准备好处理请求。 常见原因是服务器因维护或重载而停机。

5.504 Gateway Timeout  
当服务器作为网关，不能及时得到响应时返回此错误代码。

6.505 HTTP Version Not Supported  
服务器不支持请求中所使用的HTTP协议版本。
